### 9장 일관성과 합의

임시로 정리하고 다듬어야 할 듯.

내용이 생소한게 많아서 좀 이해하기 어렵다. 2장 마무리하면서 지금까지 다뤘던 내용이 이곳 저곳에 들어가있다...

##### 정리

- 선형셩
  - 가장 강한 일관성 모델
  - > 복제된 데이터가 오직 하나의 복사본만 있는 것처럼 보이게 하고 데이터에 대한 모든 연산을 원자적으로 만드는 것. ...(생략)... (데이터페이스가 단일 스레드 프로그램의 변수처럼 동작하게 만들어준다.)
  - 대신 속도가 느리다. 특히 네트워크 지연 등...
- 인과성
  - 선형성보다 좀 더 약한 모델 - 그래서 성능도 좀 더 좋다.
  - 발생한 이벤트에 순서를 보장한다.
  - 즉, 쓰는 시점에는 순서를 알 수 없고, 나중에 전체적인 결과를 기반으로 순서를 파악할 수 있다.
    - 따라서 두 연산 사이에 순서를 알 수 없을 때도 있다.
      - 두 쓰기 요청 중 어느것이 먼저인지 모른다. 이 경우 최종 쓰기 승리(LWW) 등의 해결 방법이 필요하다.
      - 이러한 문제점으로 인해서 **"합의"**가 필요하다.
- 합의
  - 모든 노드가 특정 결정을 인식하고 결정을 되돌릴 수 없는 방법으로 동의하는 것. 
  - 분산 환경에서 발생하는 여러 문제는 "합의"를 구현하므로 해결할 수 있고, 한 문제만 해결된다면 다른 문제도 쉽게 해결할 수 있다. (선형성 구현 가능)
    - 선형셩 CAS 레지스터(분산 환경에서 key를 말한다.)
    - 원자적 트랜잭션
    - 전체 순서 브로드캐스트
    - 잠금과 임차권(리더 권한)
    - 멤버십/코디네이션 서비스
    - 유일성 제약 조건
  - 이는 단일 리더 노드로 구현할 수 있다.
  - 단일 리더 노드가 문제가 발생했을 때,
    - 차단 및 복구 대기 
    - 인위적인(사람의 개입으로) 새 노드 사용
    - 자동으로 새 리더 노드 선출 - 알고리즘
- 주키퍼 같은 도구는 멤버십/코디네이션 서비스를 위학하는 역할을 한다. (이해 잘 안감, 추가로 구글링하거나 찾아보기)

- 다중 리더 or 리더 없는 분산 시스템은 전체 합의를 제공할 수 없다.
  - 즉, 어플리케이션, 사용자 등이 선형성 없이 발생하는 여러 문제를 대응할 수 있어야 한다.
  - (아마 어림짐작하면 인과성을 이야기하는 것 같음. - 추가로 찾아보기)


---

위에는 책 대충 읽고 마지막 소제목 정리 부분 다듬은건데, 읽고 나니까 확실히 약간 이해는 갈거 같음.

위 내용 기반으로 더 구체적으로 정리하기