## Section 38 정리

### Python, Git, GitHub 및 CI-CD

(아는 내용이라 생략)

### JSON, XML, YAML

(아는 내용이라 생략)

### APIs - CRUD, REST 및 SOAP

(대부분 아는 내용이라 생략)

**웹 서비스 API의 주요 유형**
1. **SOAP (Simple Object Access Protocol)**
   - **프로토콜 기반**.
   - **XML** 형식의 데이터 사용.
   - **엄격한 표준** 준수 (프로토콜 명세 명확).
   - 일반적으로 HTTP/HTTPS를 통해 전송.
   
2. **REST (Representational State Transfer)**
   - **아키텍처 기반** (프로토콜 아님).
   - 구조와 지침 제공 (SOAP보다 유연).
   - 다양한 데이터 형식 지원:
     - 일반적으로 **JSON**과 **XML** 사용.
   - HTTP/HTTPS 전송 방식 사용.
   - 현대 웹 API에서 가장 널리 사용.

**RESTful API의 특징 및 제약 조건**
- **클라이언트-서버 아키텍처**: 클라이언트가 요청, 서버가 응답.
- **상태 비저장 (Stateless)**: 요청 간 서버에 클라이언트 상태 저장 없음.
  - 요청마다 인증 정보 포함.
- **캐시 가능**: 서버가 응답을 캐시 가능 여부로 정의.
- **계층화된 시스템**: 클라이언트와 서버 사이의 중간 계층 투명성.
- **선택적 코드 온디맨드 (Code on Demand)**: 서버에서 클라이언트로 실행 코드 전송 가능.

### 모델 주도 프로그램화 - YANG, NETCONF, RESTCONF 및 gRPC


모델 주도 프로그램화는 네트워크 자동화와 관련이 있음.

YANG이라는 데이터 모델링 언어로 네트워크 정보를 구성

NETCONF RESTCONF 및 gRPC는 네트워크 관리 데이터 전송을 위한 프로토콜

JSON, XML, GPB 등의 형식으로 YANG 데이터를 전송

내부적으로 YANG에 정의된 구성대로 자동으로 네트워크를 관리

그냥 k8s 생각하면 될듯?


**1. 데이터 모델과 YANG**
- **데이터 모델**: 데이터의 구성 및 배치를 설명하는 표준화된 형식(스키마).  
  예: 자동차 대리점 데이터베이스의 구조 (Make → Model → Trim).
- **YANG**:  
  - "Yet Another Next Generation"의 약자.  
  - 2010년 IETF 표준화.  
  - 네트워크 장치의 구성 및 운영 데이터를 표현하는 데이터 모델링 언어.  
  - 장치 내부 및 API 전송에 사용.  

**2. NETCONF**
- **개요**:  
  - 2006년 IETF 표준화.  
  - YANG 데이터와 원격으로 상호작용(읽기/쓰기)할 수 있는 프로토콜.  
  - SNMP를 보완/대체하며 보안 및 쓰기 기능 강화.
- **특징**:  
  - XML 인코딩, 일반적으로 SSH/TLS를 통해 전송.  
  - RPC(원격 프로시저 호출) 기반으로 데이터 작업 수행.
- **프로토콜 스택**:  
  - **Transport**: SSH/TLS.  
  - **Messages**: RPC 사용.  
  - **Operations**: CRUD 작업.  
  - **Content**: YANG 데이터를 포함.

**3. RESTCONF**
- **개요**:  
  - NETCONF 기반으로 RESTful 접근 방식을 사용.  
  - YANG을 REST API에 매핑하는 방식으로 동작.
- **특징**:  
  - 2017년 표준화.  
  - XML 또는 JSON 지원, HTTP/HTTPS 전송.  
  - HTTP 동사(GET, POST, PUT, DELETE 등)로 작업.
- **프로토콜 스택**:  
  - **Transport**: HTTP/HTTPS.  
  - **Operations**: CRUD 작업(HTTP 기반).  
  - **Content**: XML 또는 JSON.

**4. gRPC**
- **개요**:  
  - 2015년 Google에서 개발한 오픈소스 RPC 시스템.  
  - 원격 분석 데이터 수집에 적합.  
  - XML/JSON 대신 GPB(Google Protocol Buffers) 사용.
- **특징**:  
  - HTTP/2 전송.  
  - 대규모 IoT 환경에서 효율적.  

---

#### model driven programmability stack 주요 개념 정의

- **네트워크 관리**: 네트워크와 서비스 수명 주기를 관리하는 데 필요한 프로세스, 도구, 기술 및 역할을 포괄하는 용어.

- **자동화**: 시스템이 수동 작업을 자동으로 수행하도록 하는 기술.

- **오케스트레이션**: 여러 시스템의 작업을 조정하여 전체 작업을 완료하는 기능.

- **데이터 모델링**: 데이터 유형과 계층 구조를 설명하는 방법. 네트워크 프로그래밍에서는 주로 YANG 언어를 사용.

- **프로그래밍 가능성**: API를 통해 시스템의 데이터를 검색하거나 구성을 푸시하는 기능.

- **API (Application Programming Interface)**: 소프트웨어 간 상호 작용을 위해 설계된 시스템 인터페이스.

네트워크 프로그래밍 가능성은 6개 계층으로 구성된 스택으로 요약됩니다.
1. 애플리케이션
2. 모델
3. 프로토콜
4. 인코딩
5. 전송
6. 인프라구조

- **프로토콜**: NETCONF, RESTCONF, gRPC가 주로 사용됨.
- **데이터 인코딩**: XML, JSON, YAML, GPB가 일반적.

- 참고하면 좋을 글
    - Introduction to Programmability 시리즈
        - https://blogs.cisco.com/developer/intro-to-programmability-1
        - https://blogs.cisco.com/developer/intro-to-programmability-2
        - https://blogs.cisco.com/developer/intro-to-programmability-3


## 구성 관리 도구 - Ansible 및 Terraform

### 구성 관리 도구와 네트워크 자동화 요약  

**1. 구성 관리 도구 개요**  
- 프로그래밍 전문가가 아니더라도 네트워크 자동화를 구현할 수 있는 도구 제공.  
- 주요 도구: **Ansible, Puppet, Chef, Terraform** (모두 무료 오픈 소스, 유료 엔터프라이즈 에디션 제공).  
- 자동화를 통해 여러 장치를 중앙에서 제어, 네트워크 및 서버 구성 간소화.  

**2. 각 도구의 특징 및 비교**  

**Ansible**  
- **특징**: 에이전트리스, 푸시 모델, YAML 기반.  
- **장점**:  
  - SSH를 통해 장치를 중앙에서 제어.  
  - 쉬운 학습 곡선, 네트워크 관리에 적합.  
  - Python으로 작성, Linux/Mac에서 실행.  
- **작동 방식**:  
  - 인벤토리 파일로 관리할 장치 정의.  
  - 플레이북(YAML 파일)로 작업 지침 작성.  
  - 미리 작성된 모듈로 네트워크 구성을 간단히 수행.  
- **적합성**: 구성 관리 도구로 우수, 초기 설정 간단.  

**Puppet**  
- **특징**: 에이전트 기반(에이전트리스 옵션 있음), 풀 모델, Ruby 기반 DSL 사용.  
- **장점**:  
  - 장치가 Puppet Master에 주기적으로 체크인하여 구성 유지(30분마다).  
  - 구성 일관성 유지에 유리.  
- **작동 방식**:  
  - Puppet Master(Linux 서버)에서 모든 작업 제어.  
  - 매니페스트로 장치 속성 정의.  
- **적합성**: 서버 관리에 적합하지만, 네트워크 관리에는 에이전트 제약 존재.  

**Chef**  
- **특징**: 에이전트 기반, 풀 모델, Ruby 기반.  
- **작동 방식**:  
  - Cookbooks와 Recipes로 구성 작업 정의.  
  - Puppet과 유사, 2009년에 출시.  
- **적합성**: 서버 관리에 적합, 네트워크 환경에서는 활용 제한.  

**Terraform**  
- **특징**: 에이전트리스, 푸시 모델, 선언적 접근 방식 사용.  
- **장점**:  
  - 코드형 인프라 도구로 인프라를 자동으로 프로비저닝.  
  - 클라우드 환경 및 온프레미스 플랫폼에서 사용 가능.  
  - 상태 파일로 리소스 변경 추적 및 자동 관리.  
  - 플랫폼 플러그인(Providers)을 통해 AWS, Cisco 등 다양한 환경 지원.  
- **작동 방식**:  
  - 설정 파일로 원하는 최종 상태 정의.  
  - 계획(Plan) → 실행(Apply) → 상태 업데이트(Consolidate).  
- **적합성**: 인프라 초기 프로비저닝에 매우 적합.  


**3. 에이전트(Agent)와 에이전트리스(Agentless)의 차이**  

| **구분**            | **에이전트 기반**                           | **에이전트리스**                       |
|---------------------|--------------------------------------------|---------------------------------------|
| **설치 요구**       | 대상 장치에 소프트웨어(에이전트) 설치 필요    | 별도의 소프트웨어 설치 불필요           |
| **작동 방식**        | 장치 내부 에이전트가 작업 수행 및 상태 보고   | SSH, REST API 등 기존 프로토콜로 직접 명령 실행 |
| **장점**            | 지속적 상태 관리, 고급 작업 가능              | 설정 간편, 호환성 높음, 리소스 절약       |
| **단점**            | 설치와 유지보수 필요, 장치 리소스 사용         | 상태 관리와 복잡한 작업에 한계           |
| **대표 도구**       | Puppet, Chef                               | Ansible, Terraform                    |

**적합한 경우**  
- **에이전트 기반**: 지속적 상태 관리, 데이터센터 운영.  
- **에이전트리스**: 네트워크 초기 설정, 간단한 환경 구성.  
**네트워크 자동화**에서는 보통 **에이전트리스**가 선호됨.


**4. 통합 사용 가능성**:  
  - Terraform으로 초기 인프라 프로비저닝 후 Ansible로 구성 관리.  
  - 반대로 Ansible 플레이북에서 Terraform 호출하여 환경 설정도 가능.  

**5. 결론**  
- 네트워크 자동화를 위해 **Ansible**과 **Terraform**이 가장 적합.  
- 두 도구를 함께 사용하면 초기 프로비저닝부터 구성 관리까지 원활히 수행 가능.  
- 사용 목적에 따라 적합한 도구 선택 필요(예: Terraform은 프로비저닝, Ansible은 세부 구성).

### Ansible 랩 데모

(생략)

### SDN 소프트웨어 정의 네트워킹

**1. 네트워크 플레인의 세 가지 구성 요소**  
- **데이터 플레인**: 트래픽(패킷)이 장치를 통해 전달됨.  
- **제어 플레인**: 트래픽 경로를 결정(예: OSPF 업데이트).  
- **관리 플레인**: 네트워크 장치 구성 및 모니터링(Telnet, SSH, SNMP).  

**2. SDN의 개념**  
- **기존 모델**: 데이터 플레인과 제어 플레인이 각 장치에 통합.  
- **SDN 모델**:  
  - 데이터 플레인과 제어 플레인을 분리.  
  - 제어 플레인은 중앙 **SDN 컨트롤러**에서 관리.  
  - 장치는 데이터 플레인 역할만 수행.  

**3. SDN 아키텍처**  
- **애플리케이션 계층**: 사용자 인터페이스, REST API로 SDN 컨트롤러와 통신.  
- **제어 계층**: SDN 컨트롤러, 네트워크 지능 관리.  
- **인프라 계층**: 라우터, 스위치 등의 물리 장치.  
  - **사우스바운드 API**: SDN 컨트롤러 ↔ 장치 연결(OpenFlow, SNMP, RESTCONF).  
  - **노스바운드 API**: SDN 컨트롤러 ↔ 비즈니스 애플리케이션 연결(REST).  

**4. SDN 구현 방식**  
- **순수 SDN**: 제어 플레인과 데이터 플레인 완전 분리.  
- **하이브리드 SDN**: 일부 제어 플레인을 장치에 유지(Cisco 등 대부분의 구현).  

**5. Cisco의 SDN 컨트롤러**  
- **APIC**: 데이터 센터용. Nexus 스위치 제어.  
- **APIC-EM**: 기업 환경용(캠퍼스, 지사, WAN).  
- **DNA Center**: APIC-EM의 업그레이드(현재는 Catalyst Center로 이름 변경).  

SDN은 네트워크를 더 유연하고 효율적으로 관리할 수 있는 구조를 제공하며, 중앙 집중화된 제어와 자동화를 가능하게 합니다.

### 1. Catalyst Center (구 DNA Center)

##### 개요
- Cisco의 **SDN 컨트롤러**이자 **의도 기반 네트워킹(IBN)** 플랫폼
- "무엇을" 하고 싶은지만 지정하면 "어떻게" 할지는 시스템이 자동 결정
- 네트워크를 **중앙 통합 방식**으로 관리

##### 주요 기능
1. **네트워크 관리**
   - 비즈니스 의도를 네트워크 정책으로 자동 변환
   - QoS, 보안 정책의 중앙 관리 및 자동 배포
   
2. **프로비저닝**
   - 플러그 앤 플레이(PnP) 자동 구성
   - 원격 장치 설정 및 관리
   
3. **보증(Assurance)**
   - 네트워크 상태 실시간 모니터링
   - 자동 문제 감지 및 해결 방안 제시
   
4. **운영 체제 관리**
   - 자동화된 OS 버전 관리
   - Golden Image 기반 일관된 배포
   
5. **사용자 기반 액세스**
   - Cisco ISE 연동
   - 사용자 인증 기반 접근 제어

### 구현 특징
- **REST API** 지원으로 프로그래밍 가능
- 클라우드/온프레미스 유연한 배치
- 클러스터링 통한 고가용성

#### 2. SD-Access

##### 특징
1. **신원 기반 접근 제어**
   - 물리적 위치 독립적 접근
   - ISE 및 Catalyst Center 연동
   
2. **네트워크 구조**
   - 언더레이: 물리적 네트워크 인프라
   - 오버레이: VXLAN 기반 가상 네트워크
   
3. **핵심 기술**
   - LISP: 사용자 이동성 지원
   - VXLAN: 가상 네트워크 구현
   - TrustSec: SGT 기반 트래픽 제어

##### 장점
- 기존 네트워크와 호환
- 유연한 사용자 이동성
- 중앙화된 정책 관리

#### 3. SD-WAN

##### 구성요소
1. **데이터 평면**: WAN 엣지 라우터
2. **제어 평면**: SD-WAN 컨트롤러
3. **관리 평면**: SD-WAN 매니저
4. **오케스트레이션**: SD-WAN 검증자

##### 주요 특징
- 자동화된 구성 및 장애 조치
- 전송 방식 독립성
- 애플리케이션 기반 라우팅
- 클라우드 통합

#### 4. Cisco Meraki

##### 개요
- 클라우드 기반 네트워크 관리
- 2012년 Cisco 인수
- 단일 대시보드 통합 관리

##### 제품군
- **MX**: 보안/라우팅
- **MS**: 스위치
- **MR**: 무선 AP
- **MV**: 스마트 카메라
- **MT**: IoT 센서
- **Systems Manager**: 엔드포인트 관리

##### 특징
- 클라우드 기반 중앙 관리
- 제로 터치 프로비저닝
- 템플릿 기반 구성
- 실시간 모니터링
- SD-WAN 기능 통합

### 리뷰

- 요즘에 인프라도 k8s같이 오케스트레이션 서비스가 널리 사용되는 만큼. 네트워크 구성도 안시블이랑 테라폼 같은 자동화 도구와 같이 추상화가 많이 되는듯?
- 실제 회사들은 이런 식으로 하겠다는고 느낌.
- Ansible, Terraform 같은 구성 관리 도구를 "프로그래밍 전문가가 아니더라도 네트워크 자동화를 구현할 수 있는 도구" 라고 하는데, 개발자인 입장에서 개발 관련 포스트에서 구성 관리 도구를 소개할때는 "인프라 지식이 부족해도 인프라 구성을 할 수 있게 해주는 도구"여서 둘 다 전문 분야가 아닌 영역을 쉽게 다룰 수 있게 추상화 한다는 점은 동일하지만, 추상화하는 대상이 정반대인게 재미있음.