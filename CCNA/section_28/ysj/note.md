## Section 28 정리

---

## **ACL 액세스 제어 목록

이번 섹션에서는 네트워크 보안과 트래픽 관리에서 중요한 역할을 하는 ACL(Access Control List, 액세스 제어 목록)에 대해 다룹니다. ACL은 네트워크 트래픽을 식별하고 이를 제어하기 위한 정책입니다. 이를 통해 ACL은 특정 출발지와 도착지 IP 주소, 포트 번호 등을 기반으로 트래픽이 라우터를 통과할지 여부를 결정하는 역할을 합니다. 

## **1. ACL의 주요 역할과 적용 사례**

### **트래픽 식별 및 차단**
ACL은 라우터가 통과하는 트래픽을 식별하고 제어하기 위해 사용됩니다. 출발지 IP, 목적지 IP, 포트 번호 등을 기반으로 트래픽의 허용 또는 차단이 이루어지며, 라우터나 스위치와 같은 네트워크 장치에 적용할 수 있습니다.

### **보안 관리**
예를 들어, 영업팀과 회계팀이 서로 다른 서브넷에 속해 있을 때, 영업팀 PC에서 회계팀으로 트래픽이 이동하지 않도록 ACL을 설정해 보안 문제를 방지할 수 있습니다.

### **트래픽 제어 (QoS 및 NAT)**
ACL은 보안뿐 아니라 네트워크 품질(QoS) 보장을 위해 트래픽 우선순위를 지정하거나, NAT(Network Address Translation) 규칙을 설정하는 데에도 사용됩니다. QoS 정책을 위해서는 음성 트래픽을 식별해 우선순위를 설정할 수 있고, NAT를 통해 사설 IP 주소를 공인 IP 주소로 변환하는 작업에도 ACL을 사용할 수 있습니다.

---

## **2. ACL의 종류**

### **표준 ACL**
표준 ACL은 출발지 IP 주소만을 기반으로 트래픽을 제어하는 방식입니다. 보통 번호가 1~99 사이로 부여됩니다.
- **예시**:
  ```plaintext
  access-list 1 deny 10.10.10.10 0.0.0.0
  access-list 1 permit 10.10.10.0 0.0.0.255
  ```
  첫 번째 줄에서는 특정 IP(10.10.10.10)의 접근을 차단하고, 두 번째 줄에서는 나머지 IP(10.10.10.0/24)를 허용하는 규칙입니다.

### **확장 ACL**
확장 ACL은 출발지 및 목적지 IP 주소뿐만 아니라 포트와 프로토콜(TCP, UDP)까지 세부적으로 제어할 수 있습니다. 확장 ACL은 보통 번호가 100~199 사이로 부여됩니다.
- **예시**:
  ```plaintext
  access-list 100 deny tcp 10.10.10.10 0.0.0.0 10.10.50.10 0.0.0.0 eq 23
  access-list 100 permit tcp 10.10.10.0 0.0.0.255 10.10.50.10 eq telnet
  ```
  여기서는 특정 출발지에서 특정 목적지로의 텔넷(Telnet) 트래픽만을 차단하거나 허용하는 식으로 더 세부적으로 제어할 수 있습니다.

### **이름 지정 ACL**
이름 지정 ACL은 표준 및 확장 ACL에서 번호 대신 명칭을 지정하여 좀 더 이해하기 쉽게 관리할 수 있습니다.
- **예시**:
  ```plaintext
  ip access-list extended Flackbox-Demo
  deny 10.10.10.10 0.0.0.0
  permit 10.10.10.0 0.0.0.255
  ```
  이름 지정 ACL을 사용하면 ACL을 직관적으로 구분하고 관리하기 쉽습니다.

---

## **3. ACL의 구조와 구문 이해**

ACL 구문은 다음과 같은 순서로 작성됩니다:
1. **access-list** 명령어로 시작
2. ACL 번호 또는 이름을 지정
3. 허용(`permit`) 또는 차단(`deny`)을 지정
4. 프로토콜(TCP, UDP 등)을 지정
5. 출발지와 목적지 IP 주소 및 포트 번호를 지정

---

## **4. ACL 설정 예시와 주의사항**

- **주석 사용**: ACL에는 주석을 추가하는 기능이 있으며, 향후 ACL을 관리하거나 업데이트할 때 주석은 큰 도움이 됩니다. 특히 후임자가 ACL의 규칙을 이해할 수 있도록 설정한 이유를 설명하는 것이 좋습니다.
- **와일드카드 마스크**: 와일드카드 마스크는 ACL 규칙에서 서브넷 범위를 지정할 때 사용됩니다. `0.0.0.0`은 개별 호스트를, `0.0.0.255`는 특정 서브넷을 나타냅니다.
- **포트 번호**: 특히 Windows와 같은 최신 OS에서 출발지 포트 번호가 임의로 지정되므로 출발지 포트 설정을 주의해야 합니다.

---

## **5. ACL 적용 및 관리**

### **기본 설정과 규칙 관리**
ACL은 여러 개의 ACE(Access Control Entry)로 구성됩니다. 각 ACE는 하나의 트래픽 규칙을 나타내며, ACL은 다수의 ACE로 구성될 수 있습니다. 예를 들어, 다음과 같은 ACL을 사용할 수 있습니다:
  ```plaintext
  access-list 100 deny tcp any any eq 80
  access-list 100 permit ip any any
  ```
  이 예시에서는 HTTP 트래픽을 차단하고 그 외 모든 트래픽을 허용합니다.

### **주요 명령어 및 오류 방지**
ACL을 설정할 때 특정 항목을 누락할 경우 오류가 발생할 수 있습니다. 특히 와일드카드 마스크나 포트 번호를 지정하지 않으면 명령어가 제대로 작동하지 않을 수 있습니다.

### **번호 vs. 이름 지정 ACL 선택**
ACL을 관리할 때는 이름 지정 ACL이 번호 지정 ACL보다 더 유연하고 가독성이 높으므로, 특히 큰 네트워크에서는 이름 지정 ACL을 사용하는 것이 좋습니다.

---

## **결론**

ACL은 네트워크 트래픽을 식별하고 보안을 강화하기 위한 핵심적인 도구입니다. 표준, 확장, 이름 지정 ACL을 사용하여 다양한 정책을 설정할 수 있으며, QoS나 NAT 정책에 필요한 트래픽 식별에도 ACL이 사용됩니다. 이번 섹션에서 ACL의 기본 개념과 구조를 이해한 만큼, 다음 단계에서는 ACL을 실제 환경에 적용하고 구체적인 명령어 사용법을 더 깊이 다뤄보겠습니다.

# 리뷰

- 내용도 중요하긴 한데, 강의에서 관리하면서 사람들 간의 협업 관점에서 네이밍이나 주석 사용 예시를 가볍게 설명하고 넘어가는데, 인상깊어서 관련한 내 생각을 적어봄.
    - 네이밍은 다른 사람들이 봐도 이해하기 쉽게
        - 경우에 따라 기술적인거나 도메인 관련 용어일 수 있을듯.
            - 기술적: f0 Ethernet 인바운트 트래픽 이름: f0E_in
                - 이 경우 물리적이거나 실제 연결을 바로 확인해야 하기 때문에, 기술적인 내용이 들어감.
                    - 사실 이 관점에서 보면 이게 도메인 관련 용어라고 볼 수도 있을 듯.
            - 도메인 관련: BE 개발에서 도메인 관련 부분.
    - 주석은 구현으로만 제공할 수 없는 정보를 쓰면 좋을듯.
        - e.g. 다른 회사와 연결이 필요헀는데, 파트너쉽이 끊어지면서 레거시로 남아있는 상황.
            - 주석을 해놓았으면 레거시 개선이 쉬웠을 것.
        - 기술적인 부분으로는 이해하기 어렵거나, 이상해보이는게 들어간 이유, (너무 기술적인 것보다 사용 상황이나 맥락 제공) 추상적인 기능 등이 괜찮아 보임.


- AWS의 NACL과 거의 동일한 느낌? 
- 뭐 이름부터가 Network ACL이니까 당연할지도
- Stateless 하다는 점이나 역할은 비슷한데, 구체적으로 따지면 다르긴 한듯.
    - 물리 네트워크, 가상 네트워크
    - 인터페이스 단위, 서브넷 단위

- 시스코에서 작성한 ACL 관련 문서: https://www.cisco.com/c/ko_kr/support/docs/security/ios-firewall/23602-confaccesslists.html