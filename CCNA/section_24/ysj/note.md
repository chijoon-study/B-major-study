## Section 24 정리

### 강의 요약: 네트워크 다중화

1. 네트워크 다중화 개요
- **다중화**란 단일 장애 지점을 제거하여 네트워크의 신뢰성을 높이는 방법입니다.
- 예시 네트워크는 전혀 다중화가 되지 않은 상태로, 단일 장애 지점이 존재합니다.

2. 네트워크 구성
- **구성 요소**:
  - **SP 라우터**: 서비스 제공자 라우터
  - **R1**: 기업 WAN 에지 라우터
  - **코어 분배층 스위치 및 액세스 스위치**: 각각 하나씩 존재

- **문제점**: 
  - R1, 코어 스위치, 액세스 스위치 중 하나라도 꺼지면 PC는 연결성을 잃습니다.

3. 다중화 필요성
- 소규모 사무실에서는 다중화를 위한 추가 장치 설치로 인해 비용이 증가할 수 있지만, 대규모 사무실에서는 운영 중지 비용이 더 크기 때문에 다중화가 필요합니다.

4. 다중화 구현
- **예시 네트워크**:
  - R1과 R2 두 개의 WAN 에지 라우터가 각각 SP1과 SP2에 연결.
  - 코어 분배층 스위치와 액세스층 스위치가 다중화됨.

- **장점**:
  - 서비스 제공자 라우터, WAN 에지 라우터, 코어 스위치 중 하나의 연결이 끊어져도 연결성이 유지됩니다.

5. 백업 경로 설정
- **R1의 경로 설정**:
  - 기본 정적 경로: `ip route 0.0.0.0 0.0.0.0 203.0.113.1`
  - 백업 경로: `ip route 0.0.0.0 0.0.0.0 10.10.20.2` (관리 거리 5)

- **트래픽 처리**:
  - R1에서의 트래픽은 SP1으로 우선 전송되며, SP1이 꺼질 경우 R2를 통해 SP2로 전송됩니다.

6. **FHRP(게이트웨이 다중화 프로토콜)**
- **FHRP의 역할**: 다중 게이트웨이를 통해 자동으로 대체 라우터로 전환하여 PC의 재구성을 방지합니다.
- **가상 IP 주소**: R1과 R2는 가상의 IP 주소를 협의하여 사용합니다 (예: 10.10.10.1).

7. FHRP 프로토콜 종류
- **HSRP** (핫 스탠바이 라우터 프로토콜): Cisco 전용, 활성/대기 구성.
- **VRRP** (가상 라우터 다중화 프로토콜): 공개 표준, HSRP와 유사한 기능.
- **GLBP** (게이트웨이 부하 균형 프로토콜): 활성/활성 부하 분배 지원.

### HSRP (Hot Standby Router Protocol)

이번 강의에서는 Cisco의 **핫 스탠바이 라우터 프로토콜(HSRP)**에 대해 배웁니다. HSRP는 자동으로 게이트웨이를 대체할 수 있도록 가상 IP(VIP)와 MAC 주소를 사용하는 프로토콜입니다.

HSRP 개요
- **HSRP의 목적**: 다중 기본 게이트웨이 구성.
- **구성 라우터**:
  - R1: 물리적 IP 10.10.10.2
  - R2: 물리적 IP 10.10.10.3
- **가상 IP**: 10.10.10.1

작동 원리
- R1과 R2는 HSRP를 통해 하나는 활성(active) 라우터, 다른 하나는 대기(standby) 라우터로 설정됩니다.
- 활성 라우터는 가상 IP 주소(10.10.10.1)와 관련된 가상 MAC 주소를 소유합니다.
- 두 라우터는 주기적으로 Hello 신호를 주고받으며, 대기 라우터는 활성 라우터의 Hello 신호를 받지 못하면 활성 상태로 전환됩니다.
- PC는 기본 게이트웨이로 10.10.10.1을 사용하며, HSRP의 작동을 인식하지 못합니다.

구성 및 검증
1. **R1 구성**:
   - `interface gigabitEthernet0/1`
   - `ip address 10.10.10.2 255.255.255.0`
   - `no shutdown`
   - `standby 1 ip 10.10.10.1`
2. **R2 구성**:
   - `interface gigabitEthernet0/1`
   - `ip address 10.10.10.3 255.255.255.0`
   - `no shutdown`
   - `standby 1 ip 10.10.10.1`
   
구성 후 `show standby` 명령어로 HSRP 상태를 확인합니다.

HSRP 고급 주제
1. **우선순위(priority)**:
   - 기본값: 100. 
   - 우선순위가 높은 라우터가 활성 상태가 됨.
   - 선점을 활성화하면, 우선순위가 높은 라우터가 장애 후 복구 시 활성 상태로 돌아옴.
   
2. **버전 관리**:
   - HSRP 버전 2는 개선 사항을 포함.
   - 두 라우터 모두 동일한 버전을 실행해야 함.

부하 분산

1. **HSRP 그룹을 사용한 부하 분산**:
   - 두 개의 HSRP 그룹을 설정하여 서로 다른 가상 IP를 사용할 수 있습니다.
   - 예시: R1은 10.10.10.1, R2는 10.10.10.254를 가상 IP로 설정.
   
2. **서브넷을 통한 부하 분산**:
   - 각 서브넷을 다른 라우터에 매핑하여 부하를 분산할 수 있습니다.
   - 예: R1은 10.10.10.0 서브넷, R2는 10.10.20.0 서브넷의 활성 라우터로 설정.

