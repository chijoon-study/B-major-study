## Section 20 정리

### OSPF의 특징 및 RIP, EIGRP와의 비교

1. **OSPF(Open Shortest Path First)란?**
   - **링크 상태 라우팅 프로토콜**로, 네트워크 내 모든 경로 정보를 사용하여 최적의 경로를 찾음.
   - **데이크스트라의 최단 경로 알고리즘**을 사용하여 최적 경로 산출.

2. **OSPF의 장점**
   - **확장성**: 대형 네트워크에 적합함.
   - **빠른 수렴 속도**: 네트워크 변화에 빠르게 반응.
   - **멀티캐스트 기반 메시지 전송**: 브로드캐스트가 아닌 멀티캐스트를 통해 효율적인 데이터 전송.
   - **개방형 표준**: 모든 제조업체의 장치에서 사용 가능, 다양한 장비와 호환됨.

3. **RIP과 EIGRP와의 비교**
   - **RIP**:
     - **거리 벡터 라우팅 프로토콜**로 단순하지만 확장성에 한계가 있음.
     - **소규모 네트워크**나 **테스트 환경**에 적합.
     - **프로덕션 네트워크**에는 거의 사용되지 않음.
   - **EIGRP**:
     - **Cisco 전용**으로 시작했으나 최근 **개방형 표준**이 됨.
     - **구현 및 문제 해결**이 OSPF보다 간단하지만, 여전히 Cisco 장비에 제한적으로 사용.
     - 다양한 제조업체 장치를 사용할 경우, **OSPF가 더 적합**.

4. **OSPF의 주요 작동 방식**
   1. **Hello 패킷**: 인접 라우터 식별 및 인접성 형성.
   2. **DBD (Database Description)**: 네트워크 정보 교환.
   3. **LSR (Link State Request)** & **LSA (Link State Advertisement)**: 누락된 정보 요청 및 회신.
   4. **LSU (Link State Update)**: 네트워크 변화(새 링크 추가, 링크 다운 등) 정보를 플러딩.
   5. **LSAck (Link State Acknowledgment)**: 패킷 수신 확인을 통해 신뢰성 확보.


### Cisco 라우터에서 OSPF 기본 설정 방법

1. **OSPF 활성화**
   - **명령어**: `router ospf [프로세스 ID]`
   - 예: `router ospf 1`
   - **프로세스 ID**: 로컬에서만 중요하며, 인접 라우터와 일치할 필요 없음. 하나의 라우터에서 여러 프로세스 ID 사용 가능하지만, 일반적으로 하나만 사용함.

2. **네트워크 설정**
   - **명령어 형식**: `network [네트워크 주소] [와일드카드 마스크] area [영역 번호]`
   - 예: `network 10.0.0.0 0.0.255.255 area 0`
   - **와일드카드 마스크**:
     - 서브넷 마스크와 반대로 계산됨 (예: 서브넷 마스크 255.255.0.0 ➔ 와일드카드 마스크 0.0.255.255)
     - **계산 방법**: 각 옥텟을 255에서 빼서 구함.
   - **영역**: 모든 네트워크가 작은 네트워크인 경우 `area 0`에 할당 가능. 영역은 이후 강의에서 자세히 설명.

3. **OSPF 설정 예시**
   - **목표**: R1의 일부 인터페이스에서만 OSPF 활성화
   - 설정 예:
     - `network 10.0.0.0 0.0.255.255 area 0`
   - **결과**: 10.0으로 시작하는 IP 주소를 가진 인터페이스(FastEthernet1/0, FastEthernet2/0)에만 OSPF 활성화됨. 10.1로 시작하는 FastEthernet0/0은 제외.

4. **OSPF 설정 확인**
   - `show run | section ospf`: OSPF 설정된 모든 명령어 확인.
   - `show ip protocols`: 실행 중인 라우팅 프로토콜 및 프로세스 ID 확인.
   - `show ip ospf interface brief`: OSPF 활성화된 인터페이스 목록과 관련 정보 확인.

5. **OSPF 상태 확인 및 문제 해결**
   - `show ip ospf neighbor`: 인접 라우터와 인접성이 형성되었는지 확인.
   - `show ip ospf database`: OSPF 링크 상태 데이터베이스 확인.
   - `show ip route`: 라우팅 테이블에서 OSPF 경로가 학습되었는지 확인.

OSPF의 기본 설정 절차는 위와 같습니다. OSPF 설정 후, 인접성을 확인하고 예상 경로가 라우팅 테이블에 포함되었는지 검증하는 것이 중요합니다. 

### Cisco 라우터에서 OSPF 고급 설정 방법

1. **라우터 ID 설정**
   - **기본 설정**: 라우터는 OSPF 라우터 ID로 루프백 인터페이스 중 가장 높은 IP 주소를 사용하며, 루프백이 없으면 가장 높은 IP 주소를 사용. - 수동이나 루프백 주소를 사용하는걸 권장.
   - **루프백의 장점**: 루프백은 항상 활성 상태이므로 라우터 ID가 안정적으로 유지됨.
   - **수동 설정**:
     - 명령어: `router ospf [프로세스 ID]`, 그 후 `router-id [ID]`로 라우터 ID 수동 지정.
     - **주의**: 수동 설정 후 라우터 ID를 즉시 반영하려면 OSPF 프로세스를 재시작하거나 라우터를 재부팅해야 함.
   - **확인 명령어**: `show ip protocols` 또는 `show ip ospf`로 현재 라우터 ID 확인.

2. **수동 인터페이스(Passive Interface) 설정**
   - **설명**: 수동 인터페이스는 OSPF에서 광고되지만, 인접성 형성을 시도하지 않아 보안 및 효율성 향상.
   - **적용 예시**:
     - 루프백 인터페이스: 수동으로 설정해 인접성 형성을 방지.
     - 외부와 연결된 인터페이스(예: FastEthernet2/0): 보안 목적상 수동 인터페이스로 설정.
   - **설정 방법**:
     - 개별 설정: `router ospf [프로세스 ID]` 입력 후, `passive-interface [인터페이스]`.
     - 모든 인터페이스 기본 수동 설정: `passive-interface default` 후 필요한 활성 인터페이스에 대해 `no passive-interface [인터페이스]`.
   - **확인 명령어**: `show ip ospf interface` 또는 `show ip protocols`.

3. **기본 경로(Default Route) 주입**
   - **목적**: 네트워크 전체에 기본 경로를 동적으로 배포하여, 모든 라우터가 외부 네트워크로 접근할 수 있도록 설정.
   - **구성 예시**:
     - R4에 인터넷 연결이 있는 경우: `ip route 0.0.0.0 0.0.0.0 [다음 홉 주소]`로 기본 경로 설정.
     - R4의 OSPF 프로세스에 기본 경로 주입: `default-information originate` 명령어 사용.
   - **경로 확인**: 다른 라우터에서 `show ip route`로 OSPF를 통해 기본 경로가 학습되었는지 확인. 외부 경로로 나타남.
   - **외부 경로의 의미**: 외부 경로는 조직 외부에서 유입된 것이 아닌, 다른 소스에서 OSPF로 재분배된 경로를 의미.


### OSPF 영역(OSPF Areas)
1. **OSPF 링크 상태 라우팅 프로토콜의 문제점**
   - 모든 라우터는 네트워크에 대한 전체 정보를 학습합니다.
   - 대규모 네트워크에서는 많은 경로가 라우팅 테이블에 추가되고, 과도한 메모리와 CPU 자원이 소모됩니다.
   - 네트워크 변화 시 재수렴 시간이 증가합니다.
2. **OSPF 영역을 통한 계층적 설계**
   - **목적**: 대규모 네트워크를 여러 개의 작은 영역으로 나누어 효율을 높입니다.
   - **장점**:
      - 라우팅 테이블 경로 수 감소.
      - 재수렴 시 각 영역 내에서만 영향을 미침.
      - 라우터의 자원 사용 감소.
3. **OSPF 계층 구조**
   - **백본 영역(Area 0)**:
      - 최상위 전송 영역 역할을 합니다.
      - 비백본 영역 간의 트래픽은 항상 영역 0을 통해 이동해야 합니다.
   - **비백본 영역**:
      - 최종 사용자 및 기타 네트워크 영역이 연결되는 영역.
      - 주로 목적지 트래픽을 전송하는 데 사용됩니다.

- #### OSPF 라우터 유형
1. **백본 라우터**
   - 모든 인터페이스가 영역 0에 속한 라우터입니다.
   - 영역 0의 전체 링크 상태 데이터베이스(LSDB)를 유지합니다.

2. **영역 경계 라우터(ABR)**
   - 여러 영역에 걸쳐 있는 인터페이스를 가진 라우터입니다.
   - 각 영역의 정보를 요약하여 다른 영역에 전달해 영역을 구분하고 네트워크 자원을 절약합니다.

3. **일반 영역 라우터**
   - 모든 인터페이스가 단일 영역에 속한 라우터입니다.
   - 속한 영역의 전체 링크 상태 데이터베이스를 유지하며 다른 영역의 요약 경로를 학습합니다.

4. **자율 시스템 경계 라우터(ASBR)**
   - OSPF 외부의 다른 프로토콜(EIGRP, RIP 등) 또는 정적 경로를 OSPF로 재분배하는 라우터입니다.
   - 외부 경로로 표시되어 다른 OSPF 라우터들에게 광고됩니다.


- #### 요약 및 경로 재분배 설정
  - **ABR 요약**: 여러 경로를 하나로 묶어 요약하여 다른 영역에 전달함으로써 효율성을 높입니다.
    - 예: Area 1의 여러 네트워크를 10.0.0.0/16으로 요약하여 다른 영역에 전달.
  - **ASBR 재분배**: 외부 경로를 OSPF로 가져와서 다른 OSPF 이웃에게 광고합니다.

- #### 주요 이점
  - 라우터의 자원 사용 최적화.
  - 장애의 영향을 해당 영역에 국한시켜 네트워크 안정성 증대.
  - 대규모 네트워크에서의 효율적 관리 가능.


### 네트워크 인터페이스 명령어: `speed`, `clock rate`, `bandwidth`

1. **`speed` 명령어**
   - **역할**: 이더넷 인터페이스의 물리적 전송 속도를 설정하는 명령어입니다.
   - **기본값**: 
     - GigabitEthernet: 1,000Mbps (1Gbps).
     - FastEthernet: 100Mbps.
   - **예시**:
     - `speed 10` 명령어를 입력하면 물리적 속도가 10Mbps로 변경됩니다.
     - 주의: 양쪽 링크 모두 동일하게 설정해야 문제를 방지할 수 있습니다.
   - **정리**: `speed` 명령어를 사용하여 이더넷 인터페이스의 물리적 전송 속도를 조정할 수 있습니다.
2. **`clock rate` 명령어**
   - **역할**: 직렬 인터페이스의 물리적 전송 속도를 설정하는 명령어입니다.
    - 직렬 인터페이스 설명: 주로 WAN (Wide Area Network) 환경에서 네트워크 장비 간의 장거리 연결을 위해 사용됩니다. 네트워크 장비 간에 데이터를 직렬로 전송하는 방식의 인터페이스입니다. 즉, 데이터를 하나의 비트씩 순차적으로 전송하는 구조를 가지고 있습니다. 
   - **기본값**: 1.544Mbps (T1 인터페이스 속도).
   - **예시**:
     - `clock rate 64000` 명령어를 입력하면 전송 속도가 64Kbps로 설정됩니다.
     - 마찬가지로 양쪽 링크에서 동일한 설정이 필요합니다.
   - **정리**: `clock rate` 명령어는 직렬 인터페이스의 속도를 설정할 수 있으며, T1 속도를 기준으로 사용됩니다.
3. **`bandwidth` 명령어**
   - **역할**: 인터페이스의 논리적 대역폭을 설정하여 라우터의 소프트웨어 정책에 영향을 줍니다.
   - **기본값**:
     - FastEthernet: 100Mbps.
     - 직렬 인터페이스: 1.544Mbps.
   - **특징**:
     - `bandwidth` 명령어는 물리적 전송 속도에 영향을 미치지 않으며, 라우팅 프로토콜(OSPF, EIGRP)과 QoS 정책 등에 영향을 줍니다.
   - **예시**:
     - `bandwidth 50` 명령어로 FastEthernet 인터페이스의 대역폭을 50Mbps로 설정할 수 있습니다. 이 경우 물리적 속도는 여전히 100Mbps입니다.
   - **정리**: `bandwidth` 명령어는 실제 전송 속도에는 영향을 주지 않으며, 라우팅 결정 및 QoS와 같은 소프트웨어 정책에만 영향을 줍니다.

- 정리
  - **`speed`와 `clock rate`**: 물리적 전송 속도를 직접 변경하여 링크의 전송 속도를 조정합니다.
  - **`bandwidth`**: 소프트웨어 정책에만 영향을 주며, QoS나 라우팅 프로토콜의 경로 결정에 사용됩니다.


### OSPF 메트릭 (비용) 개요

1. **OSPF 메트릭과 경로 선택**
   - **OSPF (Open Shortest Path First)**는 **링크 상태 라우팅 프로토콜**입니다.
   - 라우터는 동일한 영역 내 모든 목적지에 대한 **링크 및 비용 정보를 수집**하여 비용이 가장 낮은 경로를 선택합니다.
   - **SPF (Shortest Path First)** 알고리즘을 사용하여, 목적지까지의 **누적 비용**이 가장 낮은 경로가 **선호 경로**로 선택됩니다.

2. **다중 영역 OSPF**
   - **영역 0 (백본)**과 연결된 **일반 영역**으로 구성됩니다.
   - **ABR (Area Border Router)**가 다른 영역과 연결되어 정보를 요약해 전달합니다.
   - **영역 내 목적지**: 라우터는 영역 내 경로 중 비용이 가장 낮은 경로를 선택합니다.
   - **다른 영역 목적지**: 라우터는 ABR까지의 최적 경로를 선택한 후, ABR이 목적지까지의 경로를 계산합니다.

3. **비대칭 라우팅 방지**
   - 각 링크의 **양쪽 인터페이스**에 동일한 비용을 설정해야 **비대칭 라우팅**이 발생하지 않습니다.
   - 링크 양쪽의 비용이 다르면 **트래픽이 각 방향에서 다른 경로**로 전달될 수 있습니다.

4. **참조 대역폭과 OSPF 비용 계산**
   - **OSPF 비용**은 인터페이스 **대역폭**을 기준으로 자동 계산됩니다.
   - 기본 **참조 대역폭**은 100Mbps로 설정되어, 고속 이더넷(100Mbps)은 비용이 1입니다.
   - 그러나 **기가비트 이상의 대역폭**도 동일한 비용(1)으로 설정되어 네트워크 효율에 문제가 생길 수 있습니다.
   - 이를 해결하기 위해 **참조 대역폭을 조정**하여 OSPF가 더 높은 대역폭 경로를 선호하도록 설정할 수 있습니다.

5. **참조 대역폭 설정 방법**
   - 명령어: `auto-cost reference-bandwidth [값]`
   - 예: 참조 대역폭을 **100,000 (100Gbps)**로 설정하면, 고속 이더넷의 비용은 1000이 되고, 기가비트 이더넷은 100이 되어 기가비트 경로를 선호하게 됩니다.
   - 모든 라우터에서 동일한 참조 대역폭을 설정하여 **일관성**을 유지해야 합니다.

6. **비용과 대역폭 조정 방법**
   - **대역폭 조정**: 특정 인터페이스의 대역폭을 수동 설정하여 비용에 반영할 수 있습니다.
   - **비용 직접 설정**: `ip ospf cost [값]` 명령어로 특정 링크의 비용을 수동 설정하여 경로를 조정할 수 있습니다.
   - 대역폭 조정보다는 **비용을 직접 설정하는 방법**이 QoS(서비스 품질) 등 다른 네트워크 정책에 영향을 덜 줍니다.
  
### **OSPF 라우터 작동 요약 및 인접성 형성**

1. **OSPF 기본 동작 요약**
   - OSPF 활성화 시 라우터는 이웃을 발견하고 인접성을 형성.
   - 링크 상태 데이터베이스(LSDB)를 구축하고, 최적 경로를 계산해 라우팅 테이블에 설치.
   - 네트워크에 변화가 생기면 이를 반영해 라우팅 테이블 업데이트.

2. **OSPF 패킷 유형**
   - **Hello**: 이웃 라우터와 인접성 형성.
   - **DBD (Database Description)**: 서로 알고 있는 네트워크 정보 요약 제공.
   - **LSR (Link State Request)**: 필요한 추가 정보를 요청.
   - **LSA (Link State Advertisement)**: 네트워크 경로 광고.
   - **LSU (Link State Update)**: 경로 업데이트용.
   - **LSAck (Link State Acknowledgment)**: 정보 수신 확인.

3. **OSPF 통신 프로토콜 번호**
   - OSPF는 프로토콜 번호 89 사용.

4. **Hello 패킷 주요 구성 요소**
   - **Router ID**: 라우터를 고유하게 식별.
   - **Hello Interval/Dead Interval**: 패킷 전송 및 라우터 상태 확인 주기.
   - **이웃 목록**: 인접한 OSPF 이웃 라우터의 목록.
   - **Area ID**: 링크 수준에서의 영역 식별.
   - **라우터 우선순위**: DR(BDR) 선정을 위한 8비트 숫자.
   - **인증 플래그**: 인증 비밀번호 일치 확인.
   - **Stub 영역 플래그**: 스텁 영역 여부 표시.

5. **Hello 패킷으로 인접성 형성 요건**
   - **Hello/Dead Interval, Area ID, IP 서브넷, 인증 플래그**가 일치해야 함.
   - **Stub 영역 설정**도 일치해야 인접성 형성 가능.

6. **MTU 불일치**
   - MTU(Maximum Transmission Unit)가 불일치하면 OSPF 인접성 형성 불가.
   - 설정 확인 방법: `show interface` 및 `show IP interface` 명령어 활용.

7. **라우터 간 인접성 형성 단계**
   - **Hello 패킷 교환**: 이웃 발견 후 양방향 상태 형성.
   - **DBD 교환**: 라우터 ID가 높은 쪽이 먼저 링크 상태 데이터베이스 요약 전송.
   - **링크 상태 요청(LSR) 및 업데이트(LSU)**: 부족한 정보를 요청하고, 링크 상태 업데이트를 통해 경로를 완성.

#### OSPF 인접성 문제 해결 랩

##### 랩 환경 소개
우리는 두 대의 라우터(R1, R2)를 사용하여 간단한 네트워크 토폴로지를 설정했습니다. 각 라우터의 물리적 인터페이스는 '10.x.x.x' 네트워크에 연결되어 있으며, OSPF를 설정하여 이들 라우터 간 인접성을 형성할 예정입니다.

##### R2 설정 확인
먼저, R2의 설정을 확인해보겠습니다. 이미 OSPF 설정이 되어 있으므로, `show run | section ospf` 명령어로 구성 내용을 확인할 수 있습니다. 여기서 `router ospf 1`이 설정되어 있고, 네트워크 명령문도 추가되어 있어 라우터가 Area Border Router(ABR) 역할을 하고 있음을 알 수 있습니다. `sh ip interface brief` 명령어를 통해 루프백 인터페이스도 구성된 것을 확인할 수 있습니다.

##### R1 설정
R1을 Area 1의 내부 라우터로 설정하기 위해 템플릿을 사용하겠습니다. R2 설정에서 필요 없는 부분을 제거한 뒤, `sh ip proto` 명령어로 현재 OSPF가 설정되지 않았음을 확인합니다. 디버그 모드를 활성화하여 OSPF 인접성 형성을 확인하기 위해 `debug ip ospf adj` 명령어를 사용합니다. 설정을 입력하면 R2와 인접성이 형성되고, 디버그 출력에서 DOWN 상태에서 시작해 2WAY, EXCHANGE, 그리고 FULL 상태로 전환되는 과정을 볼 수 있습니다.

##### OSPF 인접성 문제 해결
OSPF 인접성 문제를 고의로 발생시켜 해결 방법을 살펴보겠습니다. R2의 `g0/0` 인터페이스에서 Hello 타이머를 5초로 설정하고 MTU를 1460 바이트로 변경하여 인접성을 방해할 것입니다. 이 경우 `show ip ospf interface` 명령어로 Hello 타이머와 MTU 설정을 확인할 수 있습니다.

R1에서 `sh ip ospf nei`를 실행하면 Hello 타이머 불일치 문제로 인해 이웃 관계가 형성되지 않은 것을 확인할 수 있습니다. `debug ip ospf hello` 명령어를 통해 Hello 타이머가 불일치함을 디버깅할 수 있습니다. 문제를 해결하기 위해, 양쪽의 Hello 타이머를 일치시키고 다시 인접성을 확인합니다.

또한, MTU 설정 불일치로 인한 EXCHANGE 상태 문제도 발생시켜 `debug ip ospf adj`로 이를 확인한 후, IP MTU를 일치시켜 문제를 해결합니다. 최종적으로 `show ip ospf nei`에서 인접성이 FULL 상태로 정상적으로 형성된 것을 확인할 수 있습니다.

### OSPF에서 DR(지정 라우터)과 BDR(백업 지정 라우터)의 개념 및 역할

1. **OSPF 인접성 형성 과정**
   - OSPF를 활성화한 라우터는 **Hello 패킷**을 통해 다른 OSPF 라우터를 탐색.
   - 인접 라우터들이 서로를 발견하면 **양방향 상태**가 되고, 이후 **교환 → 로딩 → 완전 상태**로 발전.
   - 완전 상태에서는 모든 라우팅 정보를 공유하며, 지점 간 링크에서는 항상 완전 인접성을 형성.

2. **다중 액세스 세그먼트의 비효율성 문제**
   - 다중 액세스 세그먼트(예: 이더넷)에서는 여러 라우터가 연결될 수 있음.
   - 모든 라우터가 서로 완전 인접성을 형성하면 **중복된 정보 전송**이 발생하여 비효율적임.

3. **DR(지정 라우터)과 BDR(백업 지정 라우터)의 역할**
   - OSPF는 **DR**을 선출하여 해당 네트워크에서 라우팅 정보를 대표로 관리하게 함.
   - DR의 장애에 대비해 **BDR**도 함께 선출하여, DR에 문제가 발생할 경우 BDR이 DR 역할을 대신함.

4. **DR과 BDR 선출 과정**
   - DR과 BDR은 **각 다중 액세스 세그먼트**에서 인터페이스 수준에서 선출됨.
   - **우선 순위 값**이 가장 높은 라우터가 DR, 그다음이 BDR이 됨.
   - 기본 우선 순위는 1이며, 우선 순위가 같을 경우 **라우터 ID**가 더 높은 라우터가 선출됨.
   - 우선 순위를 0으로 설정하면 해당 라우터는 DR 또는 BDR로 선출되지 않음.

5. **DR과 BDR 수동 설정 방법**
   - **수동 설정 명령어 예시**:
     ```plaintext
     interface FastEthernet 0/0
     ip ospf priority 100  # DR 우선 순위 설정 (우선 순위 1보다 높은 값 설정)
     ```
   - DR과 BDR을 모두 설정하고자 할 경우, DR은 100, BDR은 50 등으로 각각 우선 순위를 다르게 지정할 수 있음.
   - 우선 순위를 변경한 후 OSPF 프로세스를 재시작해야 반영됨.

6. **DR과 BDR의 라우팅 정보 전달 방식**
   - DR과 BDR은 다중 액세스 세그먼트의 모든 라우터와 **완전 이웃 상태**를 형성.
   - DR은 다른 라우터들과의 정보를 **멀티캐스트 주소 224.0.0.5**를 통해 전달.
   - DR과 BDR만이 **224.0.0.6** 주소로 전송된 링크 상태 업데이트 패킷을 수신하여, 필요한 라우팅 정보만 효율적으로 공유.
    - 나지는 2WAY 상태를 유지함. (LSU를 보내지 않음.)

7. **실무 및 시험에서의 중요성**
   - CCNA 시험에서는 DR과 BDR 선출 및 우선 순위 설정을 다루므로, OSPF 작동 방식을 숙지하는 것이 중요함.
   - 실무에서는 보통 라우터가 자체적으로 DR을 선출하도록 설정하지만, 특정 라우터를 DR로 설정해야 하는 상황도 있음.

#### OSPF DR/BDR 랩 데모 요약

이번 강의에서는 OSPF에서 지정 라우터(DR)와 백업 지정 라우터(BDR)가 어떻게 선출되고 동작하는지를 실습으로 확인해 보겠습니다.

1. 랩 토폴로지 개요
- **라우터 구성**: R6, R7, R8, R9의 네 라우터가 연결됨.
- **루프백 인터페이스**:
  - R6: 192.168.0.6/32
  - R7: 192.168.0.7/32
  - R8: 192.168.0.8/32
  - R9: 192.168.0.9/32
- **이더넷 세그먼트**:
  - R6, R7, R8, R9 모두 172.16.0.0/24 네트워크에 연결됨.
- **OSPF 설정 상태**: 현재 OSPF가 활성화되어 있지만, 루프백 인터페이스만 네트워크에 포함되어 있고 이더넷 인터페이스는 OSPF가 활성화되지 않은 상태입니다.

2. DR/BDR 선출 예상
- OSPF 우선 순위를 변경하지 않았기 때문에 기본 우선 순위는 모두 1입니다.
- 가장 높은 라우터 ID(루프백 주소)를 가진 라우터가 DR이 되고, 그다음으로 높은 라우터가 BDR이 됩니다.
- 따라서 DR은 R9(192.168.0.9), BDR은 R8(192.168.0.8)으로 예상됩니다.

3. OSPF 활성화 및 DR/BDR 확인
1. 각 라우터의 이더넷 인터페이스에서 OSPF를 활성화.
2. **명령어**: `show ip ospf neighbor`를 통해 인접 상태를 확인.
   - R9: DR (192.168.0.9)
   - R8: BDR (192.168.0.8)
   - R6, R7: DROTHER (DR, BDR가 아님)

3. **완전 상태 형성**:
   - DR과 BDR은 네트워크 내 모든 라우터와 완전 상태를 형성.
   - DROTHER는 DR과 BDR과만 완전 상태를 형성하며 서로 간에는 2WAY 상태를 유지.

4. DR 선출 변경 실습
1. **R7을 DR로 선출 설정**:
   - R7의 이더넷 인터페이스에서 `ip ospf priority 100`으로 우선 순위를 변경.
   - **DR 재선출**: `clear ip ospf process` 명령어로 OSPF 프로세스를 재시작.
   - DR이 R7(192.168.0.7)로 변경되고, 기존 BDR(R8)은 그대로 유지.

2. **DR 장애 시 BDR 동작 확인**:
   - R7의 전원을 꺼서 DR 역할을 중지.
   - BDR이었던 R8이 자동으로 DR 역할을 대체하며, R9가 새로운 BDR로 선출됨.

5. 요약 및 결론
- OSPF 다중 액세스 네트워크에서 DR과 BDR 선출은 라우터 우선 순위와 라우터 ID에 따라 결정됨.
- DR 장애 시, BDR이 자동으로 DR로 승격되며 네트워크 안정성을 유지.
- `show ip ospf interface` 명령어를 사용해 DR과 BDR 상태를 쉽게 확인 가능.
