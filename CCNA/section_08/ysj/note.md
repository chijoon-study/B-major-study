## Section 08 정리

## 서브네팅

#### CIDR - Classless Inter-Domain Routing

- CIDR (Classless Inter-Domain Routing)
기존 클래스 기반 IP 주소는 비효율적으로 많은 호스트 주소를 낭비하는 문제가 있었다.
- CIDR은 이를 해결하기 위해 고정된 서브넷 요구사항을 제거하고, 주소를 필요한 만큼만 할당할 수 있도록 한다.
    - e.g. 175.10.10.0/20처럼 네트워크의 일부만을 할당하여 IP 자원을 절약.
- **경로 요약(Route Aggregation)**이 가능하여 라우터의 메모리 및 성능을 최적화하고 네트워크의 안정성(추상화)을 높인다.
    - 이 경우 라우터에 알려지는 주소가 254개가 아니라 1개므로 라우터가 관리할 메모리가 줄어든다.
    - e.g. ISP A가 175.10.1.0/24에서 175.10.255.0/24까지 관리할 때, 라우터는 175.10.0.0/16로 한 번에 처리할 수 있다.
- `/~~ 서브넷 마스크`라는 표현이 CIDR로 인해서 나왔다. (기존에는 주소가 고정되었으므로, ip 값만 보고 바로 알 수 있었음.)


#### Subneting  

- IPv4는 원래 모든 호스트가 공공 IP 주소를 가지도록 설계되었다. 그러나 현대 네트워크는 주로 개인 IP 주소를 사용하며, 이를 이해하기 위해 IPv4의 기본 동작 방식을 먼저 학습해야 한다.

- 서브네팅 (Subnetting)
    - 서브네팅은 하나의 IP 주소 범위를 여러 작은 네트워크로 나누는 기술로, 네트워크 관리 효율성과 비용 절감을 위해 사용한다.
    - 큰 네트워크를 구입해 작은 서브넷으로 나누는 것이 여러 작은 네트워크를 구입하는 것보다 비용적으로 유리하기 때문.
- 서브넷은 **호스트 비트를 네트워크 비트로 빌려오는 과정**을 통해 만들어지며, 이를 통해 더 많은 서브넷을 생성하고 각 서브넷의 호스트 수는 줄어듭니다.
    - 서브넷 수는 `2^서브넷 비트 수`로 계산되고, 호스트 수는 `2^호스트 비트 수 - 2`로 계산된다. 네트워크 ID와 브로드캐스트 주소는 호스트로 사용할 수 없기 때문.
    - e.g. /28 서브넷 마스크를 사용하면 16개의 서브넷이 생성되고, 각 서브넷에 14개의 호스트 주소가 할당된다.

- Subnet Zero 과 All-Ones Subnet (더 찾아본 내용 추가됨)
    - Subnet Zero:
        - 네트워크 주소의 서브넷 부분이 모두 0인 서브넷.
        - e.g.: 172.16.0.0/24에서 172.16.0.0.
    - All-Ones Subnet
        - 네트워크 주소의 서브넷 부분이 모두 1인 서브넷.
        - e.g. 172.16.0.0/24에서 172.16.255.0.
        - 역사적 배경
            - 초기 IP 구현에서는 이러한 서브넷 사용이 금지되었습니다.
            - RFC 950에서 이 제한을 명시했으나, 현재는 대부분의 시스템에서 지원됩니다. (네트워크 부족 문제로 인해서)
    - Cisco IOS 12.0 이후부터 기본적으로 활성화되어 있다.
    - 두 옵션이 사용 가능한 이유는 더 작은 서브넷 단위로 나누었기 때문에, 네트워크 ID와 브로드캐스트 주소 또한 서브넷만 가져도 된다. 가장 상위 네트워크 주소의 네트워크 ID와 브로드캐스트 주소는 없어도 처리 가능하다.
    - 하지만, 오래된 시스템에서 지원하지 않을 수 있는 문제가 있어서 사용할 필요가 없다면 사용하지 않는게 좋을 듯. 

- 참고: https://www.cisco.com/c/ko_kr/support/docs/ip/dynamic-address-allocation-resolution/13711-40.html

#### /31 vs /30 서브넷 마스크

- /31 서브넷
    - 이 경우 2를 빼면 0이기 때문에, 주로 네트워크 및 브로드캐스트 주소가 필요없는 **지점 간 링크(point-to-point link)**에서 사용한다.
        - [관련 위키피디아 링크](https://ko.wikipedia.org/wiki/%EC%A0%90%EB%8C%80%EC%A0%90_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C)
        - Cisco 라우터 등에서 지원하며 트래픽이 두 지점 간에만 흐른다.
- /30 서브넷
    - 2(`(2^2)-2`)개의 호스트를 가질 수 있다.
    - 일반적으로는 /31보다 /30을 더 많이 사용한다.

#### VLSM

- 용어
    - VLSM(Variable-Length Subnet Mask)
        - 가변 길이 서브넷 마스크
        - 여러 크기의 서브넷 마스크를 하나의 네트워크 내에서 함께 사용 가능
        - 초기 이후 라우팅 프로토콜에서 지원
    - FLSM(Fixed-Length Subnet Masking)
        - 고정 길이 서브넷 마스크
        - 초기 라우팅 프로코톨에서 지원
        - 한 서브넷 마스크를 사용했다면 각 서브넷이 모두 같은 크기여야 했다.

#### Private IP

RFC 1918

- 인터넷에 연결되지 않아야 하는 IP를 할당하는 경우, 구매하지 않고 사용 가능한 Private IP를 사용함.
- [여기서 범위를 알 수 있음.](https://en.wikipedia.org/wiki/Private_network)
- Private IP를 사용하는 경우 인터넷에 사용되지 않기 때문에 재사용 가능하다.
    - 이 점 때문에 뒤에서 후술할 NAT에서도 쓰임.

#### IPv6, NAT

- IPv4를 대체하기 위해서 나옴. 앞으로도 충분히 대응 가능한 주소 범위를 가짐.
- 그러나, 이미 IPv4를 사용하는 조직이 많아서 NAT라는 대체 방법을 사용했음.
- IPv6의 주소 형식은 IPv4와 많은 차이가 있고 NAT나 잘 동작하고 있기 때문에, 새로운 시스템을 구축하는게 아닌 이상 IPv6로 전환하지 않는 경우가 많다.
- 그러나 장기적으로는 IPv6를 사용하게 될 것.

- NAT는 공인 IP 하나를 공유하는 여러 Private IP가 있고, 인터넷을 통할떄는 공인 IP로 처리하도록 한다.
    - 이 경우 하나의 공인 IP만으로 많은 호스트를 처리 가능하므로 널리 쓰이고 있다.

## 리뷰

- Subnet Zero 과 All-Ones Subnet 부분이 이해가 안가서 찾아보느라 힘들었다.
- 실제 연습 부분이 많아서 좀 스킵하면서 봄.
    - 학교에서 많이 했으니까 뭐...



