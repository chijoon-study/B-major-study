## Section 17 정리

#### GPT

- https://chatgpt.com/share/6721aafa-7108-8008-b01e-75081fe57b39 - 105~110
- https://chatgpt.com/share/67223c0a-e678-8009-933b-75d9ad44db0b - 111~118

#### 동적 라우팅 프로토콜

라우터는 다양한 방법으로 경로를 학습합니다:
- IP 주소 설정: 관리자가 인터페이스에 IP 주소를 설정합니다.
- 정적 경로 설정: 관리자가 라우터에 정적 경로를 설정하여 특정 네트워크로의 경로를 수동으로 추가합니다.
- 라우팅 프로토콜: 이웃 라우터로부터 라우팅 프로토콜을 통해 경로를 수신합니다.
    - 라우팅 테이블을 경로로 가능 가장 효율적인 경로를 기억함. (가장 효율적인게 여러개일 수 있음.)

- 동적 라우팅 프로토콜
    - 요약 경로: 요약 경로를 사용하면 라우팅 테이블을 적게 사용하므로 메모리 효율이 좋고, 구체적인 변화에 수정이 필요하지 않으므로 CPU(및 처리자원)를 적게 씀.
    - 라우터 간 상태 변화 반응: 경로에 변화가 생기면 라우팅 테이블을 변화시킴.
    - 동적 라우팅 프로토콜 vs 정적 경로
        - 정적 경로는 관리가 따다로우므로, 일부 백업 경로, 인터넷 연결 등의 용도로 제한적으로 사용.
        - 동적으로 효율적인 구성을 유지하므로 네트워크 관리 부하가 줄어듦.

- 라우팅 프로토콜 종류
    - IGP (Internal Gateway Protocol): 조직 내부에서의 라우팅을 위해 사용됩니다.
    - EGP (External Gateway Protocol): 조직 외부, 인터넷을 통한 라우팅에 사용됩니다. EGP는 **BGP (Border Gateway Protocol)**가 유일하며, 여러 조직 간 경로를 통보하고 최적의 경로를 선택합니다.
    - IGP 종류
        - 거리 벡터 라우팅 프로토콜: RIP, EIGRP
            - 인접 라우터의 관점에서 경로 정보가 전달됩니다.
            - 제한된 범위의 정보만 제공되며, 다른 라우터들의 전체 구조를 알지 못합니다.
        - 링크 상태 라우팅 프로토콜: OSPF, IS-IS
            - 라우터는 영역 내 모든 라우터와 그들의 링크 상태 정보를 학습합니다.
            - 영역 내의 모든 라우터와 링크 정보를 확인할 수 있습니다.
    - 관련 링크
        - https://www.gns3network.com/dynamic-routing-complete-guide-for-beginner-and-expert/
        - https://community.cisco.com/t5/networking-knowledge-base/dynamic-routing-protocols-ospf-eigrp-ripv2-is-is-bgp/ta-p/4511577

- 라우팅 프로토콜 메트릭과 관리 거리
    - 메트릭
        - 같은 프로토콜에서 특정 경로까지 가는데 드는 비용
        - 라우팅 프로토콜은 주로 홉 수나 대역폭을 기준으로 메트릭 값을 사용해 최적의 경로를 선택합니다.
    - 관리 거리(Administrative Distance, AD)
        - 여러 라우팅 프로토콜이 동시에 활성화되어 동일 목적지로 향하는 경로를 제공하는 경우, 프로토콜 간 메트릭 값은 서로 비교할 수 없기 때문에 관리 거리가 필요합니다.
        - 관리 거리는 라우팅 프로토콜의 신뢰도를 나타내며, 값이 낮을수록 더 신뢰할 수 있는 프로토콜로 간주됩니다. 예를 들어, 직접 연결된 경로의 관리 거리는 0, 정적 경로는 1, OSPF는 110, RIP는 120입니다. 
        - 필요에 따라 비고정 특정 경로를 백업 경로로 설정할 수 있습니다. 예를 들어, 정적 경로의 AD 값을 라우팅 프로토콜의 AD 값보다 높게 설정하여 주 경로가 끊어졌을 때에만 백업 경로로 전환되도록 구성할 수 있습니다.

- 최적 경로 결정 기준
    - 우선순위별로
        - 가장 긴 접두사(Longest Prefix Match): 가장 구체적인 경로를 우선적으로 선택합니다.
        - 관리 거리 (Administrative Distance, AD): 값이 낮을수록 우선 순위가 높습니다.
        - 메트릭: 경로의 비용으로, 역시 낮은 값이 우선합니다.


- 루프백 인터페이스
    - 루프백 인터페이스는 물리적인 장애 없이 항상 활성화된 상태로, 라우터와 스위치에 IP 주소를 할당하는 논리적 인터페이스입니다.
    - 루프백 인터페이스는 소프트웨어적으로 구현된 가상 인터페이스로, 항상 활성화 상태입니다.
    - 루프백 주소는 일반적으로 /32 서브넷 마스크(255.255.255.255)로 구성되며, 고정된 관리 IP 주소를 통해 여러 경로를 사용하는 경우에도 유연성을 제공합니다. 이로 인해 관리와 트래픽 경로 다중화에 매우 유용합니다.
    - 인터페이스의 서브넷: 라우터의 각 물리적 인터페이스 (예: FastEthernet/0/1, FastEthernet/0/2 등)는 서로 다른 서브넷에 할당될 수 있습니다. 루프백 인터페이스는 이러한 물리적 인터페이스와는 다르게, 주로 장비 자체의 IP 스택과 통신할 때 사용됩니다.
    - 접근성 및 장애 대응: 루프백 인터페이스는 실제 물리적 인터페이스가 작동하지 않더라도 항상 접근 가능하다는 장점이 있습니다. 따라서 라우터의 특정 물리적 인터페이스(FE/01)가 문제가 생길 경우에도, 루프백 인터페이스를 통해 해당 라우터의 서비스를 사용할 수 있습니다. 이는 특히 네트워크 관리 및 모니터링, 그리고 원격 접속에서 유용합니다.
    - IP 주소의 일관성: 루프백 인터페이스는 항상 동일한 IP 주소를 가지므로, 애플리케이션이나 프로세스가 루프백 인터페이스를 통해 통신할 때, IP 주소가 변경되지 않아 안정적인 연결을 유지할 수 있습니다.
    - (추가) 내가 알기로는 HOST(우리 노트북 같은거)에서 자신의 장치 내에서 테스트 및 통신을 위한 용도로 사용된다고 알고 있었는데, (127.0.0.1, ::1) 네트워크 상에서는 별도 라우터와 연결된 HOST 없이, HOST처럼 사용하는 가상 IP 같은 느낌인듯? 그럼 별도 HOST없이도 바로 라우터에 뭔가 보낼 수 있게 되니까.
    - 다음과 같이 사용 가능
        - `interface loopback0`, `ip address 192.168.1.1 255.255.255.0` -> 루프백 인터페이스 loopback0에 IP 주소 192.168.1.1을 할당.
        - 루프백 인터페이스에 설정된 IP는 항상 활성화되어 있어, 네트워크 장비의 테스트 및 원격 관리에 유용하게 사용됩니다. 예를 들어, 네트워크 모니터링 도구는 루프백 인터페이스를 통해 장비의 상태를 확인하고, 문제를 진단할 수 있습니다.
    - 장점
        - 신뢰성: 루프백 인터페이스는 항상 활성 상태를 유지하므로, 물리적인 인터페이스가 다운되거나 문제가 생기더라도 루프백 IP 주소를 통해 통신이 가능해집니다. 따라서 네트워크 장비의 주소가 변경되지 않아, 안정적인 접속을 보장합니다.
        - 간편한 관리: 특정 라우터에 접속된 호스트가 아닌 루프백 인터페이스로 직접 통신할 수 있기 때문에, 관리자가 장비에 접근하는 방법이 단순해집니다. 예를 들어, 여러 개의 물리적 인터페이스가 있는 경우에도 루프백 주소를 통해 동일한 방식으로 접속할 수 있습니다.
        - 테스트 및 진단: 루프백 인터페이스는 장비의 상태를 테스트하거나 네트워크 서비스를 진단하는 데 유용합니다. 예를 들어, 라우터의 루프백 IP로 Ping을 보내면 해당 장비가 정상적으로 작동하고 있는지 확인할 수 있습니다.
        - 라우팅 프로토콜: 루프백 인터페이스는 동적 라우팅 프로토콜에서도 중요한 역할을 합니다. 예를 들어, OSPF와 같은 프로토콜에서는 루프백 인터페이스를 사용해 라우터 ID를 설정하거나, 안정적인 경로를 제공하는 데 활용할 수 있습니다.


- 인접성과 수동 인터페이스
    - 인접성(Adjacency): 인접성은 두 라우터 간의 연결 상태를 나타내며, 이들은 서로 직접적으로 통신할 수 있는 상태입니다. 인접성을 형성하려면 다음과 같은 과정이 필요합니다:
        1. 라우팅 프로토콜 활성화: 두 라우터의 인터페이스에서 동일한 라우팅 프로토콜(RIP, EIGRP, OSPF 등)이 활성화되어야 합니다.
        2. Hello 패킷 전송: 라우터는 Hello 패킷을 주기적으로 전송하여 상대 라우터를 탐색합니다.
        3. 인접성 형성: Hello 패킷을 통해 서로를 인식하고, 통신을 위한 인접성이 형성됩니다.
        4. 라우팅 정보 교환: 인접성이 형성된 후, 라우터들은 라우팅 테이블을 업데이트하기 위해 라우팅 정보를 교환합니다.
    - 수동 인터페이스 (Passive Interface): 수동 인터페이스는 특정 라우터 인터페이스에서 라우팅 프로토콜의 활성화를 막고, 해당 인터페이스를 통해 라우팅 업데이트를 전송하지 않도록 설정하는 것을 의미합니다. 수동 인터페이스의 필요성은 다음과 같습니다:
        1. 보안 강화: 수동 인터페이스를 사용하면 특정 라우터에 대한 내부 정보를 외부로 전송하지 않으므로, 보안 위협을 줄일 수 있습니다. 예를 들어, 협력사와의 연결이 필요하지만 내부 정보를 공유하고 싶지 않을 때 유용합니다.
        2. 자원 효율성: 수동 인터페이스는 Hello 패킷을 전송하지 않기 때문에 자원을 절약할 수 있습니다. 물리적으로 연결되어 있지 않은 루프백 인터페이스와 같은 논리적 인터페이스에 대해 수동으로 설정하면, 자원을 낭비하지 않고 필요한 경로 정보만 학습할 수 있습니다.
        3. 경로 학습: 수동 인터페이스를 통해 내부 라우터들은 외부로의 업데이트 없이도 경로 정보를 학습할 수 있습니다. 예를 들어, 특정 서브넷의 경로는 알리되, 그 경로로 향하는 패킷은 전송하지 않도록 할 수 있습니다.




